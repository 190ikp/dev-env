# 開発用お手軽仮想サーバ

新入生対象に作ってみた

## これはなに

開発環境を手軽に導入しましょうというアレ

一応Windows / Mac OSX / Linux, 32bit/64bit問わず動作するはず

動作しなかったらごめんなさい...

## 必要なもの

- VirtualBox (仮想環境を動かすソフトウェア)
- Vagrant (仮想環境をお手軽に作ってくれるすごいやつ)
- Git (このリポジトリを引っ張ってくるのに必要)
- VisualStudio Code Insiders (IDEみたいに使えるテキストエディタ，今回の主役)

インストール方法はググれば腐るほど出てきます．がんばって！

## つかいかた

1. 作業用ディレクトリにしたい場所にこのリポジトリを`git clone`

2. できた`dev-env`ディレクトリをVSCode Insidersでひらく

3. `` Ctrl + ` ``でターミナルもしくはコマンドプロンプトを表示させたら，
    - Windowsの場合は`vagrant_init.bat`
    - Mac / Linuxの場合は`vagrant_init.sh`
    
    を実行

    VirtualBoxで仮想サーバが起動し，sshの接続先に仮想サーバ`vagrant`が登録されます

4. `Ctrl + Shift + P`でコマンドパレットをひらいて`remote-ssh`とでも打ってみましょう

   `Remote-SSH: Connect to Host...`という選択肢が出てくるのでそれを選択

   接続先で`vagrant`を選択しましょう

5. 別ウィンドウで仮想サーバ用のVSCodeが開きます
   ホスト側の`dev-env`ディレクトリはゲスト側の`/vagrant`ディレクトリにマウントされています
   `Open Folder`から`/vagrant`ディレクトリを開きましょう

6. 初めて開発サーバを立ち上げた場合は，packages.shを実行しておきましょう
   
   開発に必要な各種パッケージをインストール・セットアップしてくれます

   慣れてきたら，自分用に`packages.sh`をカスタマイズしてみましょう！

## 注意点

開発サーバ内で`/vagrant`以下のディレクトリ以外(`/usr`など)に作業ファイルを置くと，ホスト側と同期できません

作業内容が水の泡と化す可能性があるので気をつけましょう

## その他

仮想サーバを止めたいときは，ホスト側の`dev-env`ディレクトリで`vagrant halt`とコマンドを打つと止められます

なんかバグってよくわかんなくなったら`vagrant reload`してみましょう

それでも解決できないときは`vagrant destroy`で環境を破棄して，もう一度`vagrant up`で作り直してみましょう

仮想環境を壊しても作業ファイルは`dev-env`ディレクトリ以下に同期されているので大丈夫です！